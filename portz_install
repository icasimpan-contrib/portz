#!/bin/bash
#
# This file is part of 'portz'
#
# Copyright (C) Zbigniew Zagorski <z.zagorski@gmail.com> and others, 
# licensed to the public under the terms of the GNU GPL (>= 2)
# see the file COPYING for details
#
# I.e., do what you like, but keep copyright and there's NO WARRANTY. 
# 

PNAME=portz-install
export PNAME

set -e
portz_root=${portz_libdir-`pwd`}
export portz_root
package_param=$1

build_command="$0 $@"
export build_command

. ${portz_root}/scripts/defs.sh

portz_assert_know_package

inform "prefix      = $prefix"
inform "exec_prefix = $exec_prefix"

if [ -n "$depends" ] ; then 
    inform "DEPENDS: $depends"

    for dep in $depends ; do
        if portz_check_installed $dep ; then
            inform "$dep -> already available"
        else
            inform "$dep -> not installed, installing"
            (
                unset first_name
                unset name
                unset package
                ${portz_root}/portz_install $dep
            )
        fi
    done
fi

. ${portz_scripts}/install_staging.sh

portz_step ${staging_dir} deploy


# jedit: :tabSize=8:indentSize=4:noTabs=true:mode=shellscript:

